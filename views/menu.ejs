<%- include("templates/header") %> 
<%- include("templates/navbar_top") %>

<link rel="stylesheet" href="/css/menu.css">

</head>

<body>
<header>
  <h1><%= restaurant.name %></h1>
</header>

<main>
  <% menu.forEach(function(item) { %>
  <div class="card">
    <img src="<%= restaurant.image %>" alt="<%= restaurant.name %>" />
    <div class="item-details">
      <h2><%= item.item %></h2>
      <p>
        <small><strong>Calories:</strong> <%= item.calories %>Cals</small>
      </p>
      <p>
        <small><strong>Protein:</strong> <%= item.protein %>g</small>
      </p>
      <p>
        <small><strong>Fat:</strong> <%= item.total_fat %>g</small>
      </p>
    </div>
    <button class="add-btn" onclick="addToCart(<%= JSON.stringify(item) %>)">Add</button>
  </div>
  <% }); %>
</main>

<div id="tray-preview" style="display:none">
  <h2>Total Nutrition Values of My Tray</h2>
  <p id="total-calories"></p>
  <p id="total-carb"></p>
  <p id="total-protein"></p>
  <p id="total-fat"></p>
</div>

<div class="placeholder"></div>

<script>
let totalCalories = 0;
let totalCarb = 0;
let totalProtein = 0;
let totalFat = 0;

function addToCart(item) {
  totalCalories += item.calories;
  totalCarb += item.carb;
  totalProtein += item.protein;
  totalFat += item.fat;
  
  document.getElementById('total-calories').textContent = `Total Calories: ${totalCalories}Cals`;
  document.getElementById('total-carb').textContent = `Total Carbs: ${totalCarb}g`;
  document.getElementById('total-protein').textContent = `Total Protein: ${totalProtein}g`;
  document.getElementById('total-fat').textContent = `Total Fat: ${totalFat}g`;

  const trayPreview = document.getElementById('tray-preview');
  if (trayPreview.style.display === 'none') {
    trayPreview.style.display = 'block';
  }
}
</script>

<%- include('templates/navbar_bottom') %> 
<%- include("templates/footer") %>
